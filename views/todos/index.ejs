<%- include("../partials/header.ejs") %>

<!-- Title -->
<div class="mx-auto p-2 text-center" style="width: 200px; margin-top: 15vh;">
  <h1>ToDo List</h1>
</div>

<!-- Buttons -->
<div class="d-flex flex-md-row justify-content-center mx-auto p-2 gap-4" style="width: 250px;">
  <a href="/todos/new">
    <button type="button" class="btn btn-primary">Create ToDo</button>
  </a>
  <a href="/todos/delete-all">
    <button type="button" class="btn btn-danger">Delete Completed</button>
  </a>
</div>

<!-- To-Do List -->
<div class="d-flex flex-column flex-md-row gap-4 align-items-center justify-content-center p-4">
  <div class="list-group" style="width: 300px;">
    <ul class="list-unstyled">
      <!-- Loop through todo list -->
      <% for (let todo of todos) { %>
      <li>
        <!-- If todo is completed, strike through text -->
        <a
          href="#"
          class="list-group-item list-group-item-action d-flex gap-3 py-3 <%= todo.isCompleted ? 'bg-light text-muted' : '' %>"
          aria-current="true"style="<%= todo.isCompleted ? 'text-decoration: line-through; font-style: italic;' : '' %>"
        >
          <div class="d-flex gap-2 w-100 justify-content-between">
            <div>
              <h6 class="mb-0"><%= todo.title %></h6>
            </div>
            <!-- Button group container to right-align buttons with equal spacing -->
            <div class="d-flex gap-2">
              <!-- Toggle completed -->
              <form action="/todos/complete/<%= todo.id %>?_method=PATCH" method="POST" style="display: inline">
                <button type="submit" class="btn btn-success btn-sm">
                  <i class="bi bi-check"></i>
                </button>
              </form>
              <button class="btn btn-warning btn-sm" onclick="window.location.href='/todos/edit/<%= todo.id %>'">
                <i class="bi bi-pencil"></i>
              </button>
            </div>
          </div>
        </a>
      </li>
      <% } %>
    </ul>
  </div>
</div>
  

  <%- include("../partials/footer.ejs") %>

